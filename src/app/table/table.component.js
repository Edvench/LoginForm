"use strict";var __decorate=this&&this.__decorate||function(e,t,o,r){var n,s=arguments.length,a=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var i=e.length-1;0<=i;i--)(n=e[i])&&(a=(s<3?n(a):3<s?n(t,o,a):n(t,o))||a);return 3<s&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),create_user_modal_component_1=require("../ModalWindow/create-user-modal/create-user-modal.component"),delete_user_modal_component_1=require("../ModalWindow/delete-user-modal/delete-user-modal.component"),update_user_modal_component_1=require("../ModalWindow/update-user-modal/update-user-modal.component"),TableComponent=function(){function e(e,t,o,r){this.auth=e,this.tableService=t,this.router=o,this.dialog=r,this.users=[],this.countItem=5,this.currentPage=1,this.adminRights=!1,this.displayedColumns=["name","email","options"],this.currentUser={name:"",email:"",role:"",password:""}}return e.prototype.ngOnInit=function(){this.getUsers(),this.role=localStorage.getItem("role"),"admin"==this.role&&(this.adminRights=!0)},e.prototype.openCreateUserDialog=function(){this.dialog.open(create_user_modal_component_1.CreateUserModalComponent,{width:"250px"})},e.prototype.openUpdateUserDialog=function(o){var r=this,e=this.users.findIndex(function(e){return e.id==o}),t=this.users[e];console.log(t.password),this.currentUser={name:t.name,email:t.email,role:t.role,password:t.password};var n=this.dialog.open(update_user_modal_component_1.UpdateUserModalComponent,{data:{id:o,name:this.currentUser.name,email:this.currentUser.email,role:this.currentUser.role,password:this.currentUser.password},width:"250px"});console.log(this.currentUser),n.afterClosed().subscribe(function(e){var t=r.users.findIndex(function(e){return e.id==o});console.log(t),r.users[t]={id:e.id,name:e.name,email:e.email,role:e.role,password:e.password}})},e.prototype.openDeleteUserDialog=function(o){var r=this;this.dialog.open(delete_user_modal_component_1.DeleteUserModalComponent,{data:{id:o},width:"250px"}).afterClosed().subscribe(function(e){if(console.log(e),"ok"==e){var t=r.users.findIndex(function(e){return o==e.id});r.users.splice(t,1)}})},e.prototype.getUsers=function(){var o=this;this.tableService.getUsers(this.countItem,this.currentPage,localStorage.getItem("token")).subscribe(function(t){t.data.forEach(function(e){o.users.push(e),o.countPage=Math.ceil(o.countPage=t.total/o.countItem)}),console.log(o.users)}),this.currentPage++},e.prototype.logout=function(){this.auth.logout(),console.log(localStorage.getItem("isLoggedIn")),this.router.navigate([""])},e=__decorate([core_1.Component({selector:"app-table",templateUrl:"./table.component.html",styleUrls:["./table.component.css"]})],e)}();exports.TableComponent=TableComponent;